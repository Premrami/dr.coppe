customElements.get("quick-add-modal")||customElements.define("quick-add-modal",class extends ModalDialog{constructor(){super(),this.modalContent=this.querySelector('[id^="QuickAddInfo-"]'),this.addEventListener("product-info:loaded",({target:t})=>{t.addPreProcessCallback(this.preprocessHTML.bind(this))})}hide(t=!1){const e=document.querySelector("cart-notification")||document.querySelector("cart-drawer");e&&e.setActiveElement(this.openedBy),this.modalContent.innerHTML="",t&&(this.openedBy=null),super.hide()}show(t){t.setAttribute("aria-disabled",!0),t.classList.add("loading"),t.querySelector(".loading__spinner").classList.remove("hidden"),fetch(t.getAttribute("data-product-url")).then(e=>e.text()).then(e=>{const i=new DOMParser().parseFromString(e,"text/html").querySelector("product-info");this.preprocessHTML(i),HTMLUpdateUtility.setInnerHTML(this.modalContent,i.outerHTML),window.Shopify&&Shopify.PaymentButton&&Shopify.PaymentButton.init(),window.ProductModel&&window.ProductModel.loadShopifyXR(),super.show(t)}).finally(()=>{t.removeAttribute("aria-disabled"),t.classList.remove("loading"),t.querySelector(".loading__spinner").classList.add("hidden")})}preprocessHTML(t){t.classList.forEach(e=>{(e.startsWith("color-")||e==="gradient")&&this.modalContent.classList.add(e)}),this.preventDuplicatedIDs(t),this.removeDOMElements(t),this.removeGalleryListSemantic(t),this.updateImageSizes(t),this.preventVariantURLSwitching(t)}preventVariantURLSwitching(t){t.setAttribute("data-update-url","false")}removeDOMElements(t){const e=t.querySelector("pickup-availability");e&&e.remove();const i=t.querySelector("product-modal");i&&i.remove();const r=t.querySelectorAll("modal-dialog");r&&r.forEach(o=>o.remove())}preventDuplicatedIDs(t){const e=t.dataset.section,i=e,r=`quickadd-${e}`;t.innerHTML=t.innerHTML.replaceAll(i,r),Array.from(t.attributes).forEach(o=>{o.value.includes(i)&&t.setAttribute(o.name,o.value.replace(i,r))}),t.dataset.originalSection=e}removeGalleryListSemantic(t){const e=t.querySelector('[id^="Slider-Gallery"]');e&&(e.setAttribute("role","presentation"),e.querySelectorAll('[id^="Slide-"]').forEach(i=>i.setAttribute("role","presentation")))}updateImageSizes(t){const e=t.querySelector(".product");if(!e?.classList.contains("product--columns"))return;const i=e.querySelectorAll(".product__media img");if(!i.length)return;let r="(min-width: 1000px) 715px, (min-width: 750px) calc((100vw - 11.5rem) / 2), calc(100vw - 4rem)";e.classList.contains("product--medium")?r=r.replace("715px","605px"):e.classList.contains("product--small")&&(r=r.replace("715px","495px")),i.forEach(o=>o.setAttribute("sizes",r))}});
//# sourceMappingURL=quick-add.js.map
