{"version":3,"file":"media-gallery.js","sources":["../theming/js/media-gallery.js"],"sourcesContent":["customElements.get(\"media-gallery\")||customElements.define(\"media-gallery\",class extends HTMLElement{constructor(){super(),this.elements={liveRegion:this.querySelector('[id^=\"GalleryStatus\"]'),viewer:this.querySelector('[id^=\"GalleryViewer\"]'),thumbnails:this.querySelector('[id^=\"GalleryThumbnails\"]')},this.mql=window.matchMedia(\"(min-width: 750px)\"),this.elements.thumbnails&&(this.elements.viewer.addEventListener(\"slideChanged\",debounce(this.onSlideChanged.bind(this),500)),this.elements.thumbnails.querySelectorAll(\"[data-target]\").forEach(e=>{e.querySelector(\"button\").addEventListener(\"click\",this.setActiveMedia.bind(this,e.dataset.target,!1))}),this.dataset.desktopLayout.includes(\"thumbnail\")&&this.mql.matches&&this.removeListSemantic())}onSlideChanged(e){const i=this.elements.thumbnails.querySelector(`[data-target=\"${e.detail.currentElement.dataset.mediaId}\"]`);this.setActiveThumbnail(i)}setActiveMedia(e,i){const t=this.elements.viewer.querySelector(`[data-media-id=\"${e}\"]`)||this.elements.viewer.querySelector(\"[data-media-id]\");if(!t)return;if(this.elements.viewer.querySelectorAll(\"[data-media-id]\").forEach(s=>{s.classList.remove(\"is-active\")}),t?.classList?.add(\"is-active\"),i){if(t.parentElement.firstChild!==t&&t.parentElement.prepend(t),this.elements.thumbnails){const s=this.elements.thumbnails.querySelector(`[data-target=\"${e}\"]`);s.parentElement.firstChild!==s&&s.parentElement.prepend(s)}this.elements.viewer.slider&&this.elements.viewer.resetPages()}if(this.preventStickyHeader(),window.setTimeout(()=>{(!this.mql.matches||this.elements.thumbnails)&&t.parentElement.scrollTo({left:t.offsetLeft});const s=t.getBoundingClientRect();if(s.top>-.5)return;const n=s.top+window.scrollY;window.scrollTo({top:n,behavior:\"smooth\"})}),this.playActiveMedia(t),!this.elements.thumbnails)return;const r=this.elements.thumbnails.querySelector(`[data-target=\"${e}\"]`);this.setActiveThumbnail(r),this.announceLiveRegion(t,r.dataset.mediaPosition)}setActiveThumbnail(e){!this.elements.thumbnails||!e||(this.elements.thumbnails.querySelectorAll(\"button\").forEach(i=>i.removeAttribute(\"aria-current\")),e.querySelector(\"button\").setAttribute(\"aria-current\",!0),!this.elements.thumbnails.isSlideVisible(e,10)&&this.elements.thumbnails.slider.scrollTo({left:e.offsetLeft}))}announceLiveRegion(e,i){const t=e.querySelector(\".product__modal-opener--image img\");t&&(t.onload=()=>{this.elements.liveRegion.setAttribute(\"aria-hidden\",!1),this.elements.liveRegion.innerHTML=window.accessibilityStrings.imageAvailable.replace(\"[index]\",i),setTimeout(()=>{this.elements.liveRegion.setAttribute(\"aria-hidden\",!0)},2e3)},t.src=t.src)}playActiveMedia(e){window.pauseAllMedia();const i=e.querySelector(\".deferred-media\");i&&i.loadContent(!1)}preventStickyHeader(){this.stickyHeader=this.stickyHeader||document.querySelector(\"sticky-header\"),this.stickyHeader&&this.stickyHeader.dispatchEvent(new Event(\"preventHeaderReveal\"))}removeListSemantic(){this.elements.viewer.slider&&(this.elements.viewer.slider.setAttribute(\"role\",\"presentation\"),this.elements.viewer.sliderItems.forEach(e=>e.setAttribute(\"role\",\"presentation\")))}});\r\n"],"names":["n","r"],"mappings":"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"}