{"version":3,"file":"price-per-item.js","sources":["../theming/js/price-per-item.js"],"sourcesContent":["customElements.get(\"price-per-item\")||customElements.define(\"price-per-item\",class extends HTMLElement{constructor(){super(),this.variantId=this.dataset.variantId,this.input=document.getElementById(`Quantity-${this.dataset.sectionId||this.dataset.variantId}`),this.input&&this.input.addEventListener(\"change\",this.onInputChange.bind(this)),this.getVolumePricingArray()}updatePricePerItemUnsubscriber=void 0;variantIdChangedUnsubscriber=void 0;connectedCallback(){this.variantIdChangedUnsubscriber=subscribe(PUB_SUB_EVENTS.variantChange,t=>{this.variantId=t.data.variant.id.toString(),this.getVolumePricingArray()}),this.updatePricePerItemUnsubscriber=subscribe(PUB_SUB_EVENTS.cartUpdate,t=>{if(t.cartData)if(t.cartData.variant_id!==void 0)t.productVariantId===this.variantId&&this.updatePricePerItem(t.cartData.quantity);else if(t.cartData.item_count!==0){const e=t.cartData.items.find(i=>i.variant_id.toString()===this.variantId);e&&e.id.toString()===this.variantId?this.updatePricePerItem(e.quantity):this.updatePricePerItem(0)}else this.updatePricePerItem(0)})}disconnectedCallback(){this.updatePricePerItemUnsubscriber&&this.updatePricePerItemUnsubscriber(),this.variantIdChangedUnsubscriber&&this.variantIdChangedUnsubscriber()}onInputChange(){this.updatePricePerItem()}updatePricePerItem(t){this.input&&(this.enteredQty=parseInt(this.input.value),this.step=parseInt(this.input.step)),this.currentQtyForVolumePricing=t===void 0?this.getCartQuantity(t)+this.enteredQty:this.getCartQuantity(t)+parseInt(this.step),this.classList.contains(\"variant-item__price-per-item\")&&(this.currentQtyForVolumePricing=this.getCartQuantity(t));for(let e of this.qtyPricePairs)if(this.currentQtyForVolumePricing>=e[0]){const i=document.querySelector(`price-per-item[id^=\"Price-Per-Item-${this.dataset.sectionId||this.dataset.variantId}\"] .price-per-item span`);this.classList.contains(\"variant-item__price-per-item\")?i.innerHTML=window.quickOrderListStrings.each.replace(\"[money]\",e[1]):i.innerHTML=e[1];break}}getCartQuantity(t){return t||t===0?t:parseInt(this.input.dataset.cartQuantity)}getVolumePricingArray(){const t=document.getElementById(`Volume-${this.dataset.sectionId||this.dataset.variantId}`);this.qtyPricePairs=[],t&&t.querySelectorAll(\"li\").forEach(e=>{const i=parseInt(e.querySelector(\"span:first-child\").textContent),r=e.querySelector(\"span:not(:first-child):last-child\").dataset.text;this.qtyPricePairs.push([i,r])}),this.qtyPricePairs.reverse()}});\n"],"names":[],"mappings":"AAAA,eAAe,IAAI,gBAAgB,GAAG,eAAe,OAAO,iBAAiB,cAAc,WAAW,CAAC,aAAa,CAAC,MAAK,EAAG,KAAK,UAAU,KAAK,QAAQ,UAAU,KAAK,MAAM,SAAS,eAAe,YAAY,KAAK,QAAQ,WAAW,KAAK,QAAQ,SAAS,EAAE,EAAE,KAAK,OAAO,KAAK,MAAM,iBAAiB,SAAS,KAAK,cAAc,KAAK,IAAI,CAAC,EAAE,KAAK,sBAAqB,CAAE,CAAC,+BAA+B,OAAO,6BAA6B,OAAO,mBAAmB,CAAC,KAAK,6BAA6B,UAAU,eAAe,cAAc,GAAG,CAAC,KAAK,UAAU,EAAE,KAAK,QAAQ,GAAG,SAAQ,EAAG,KAAK,sBAAqB,CAAE,CAAC,EAAE,KAAK,+BAA+B,UAAU,eAAe,WAAW,GAAG,CAAC,GAAG,EAAE,SAAS,GAAG,EAAE,SAAS,aAAa,OAAO,EAAE,mBAAmB,KAAK,WAAW,KAAK,mBAAmB,EAAE,SAAS,QAAQ,UAAU,EAAE,SAAS,aAAa,EAAE,CAAC,MAAM,EAAE,EAAE,SAAS,MAAM,KAAK,GAAG,EAAE,WAAW,SAAQ,IAAK,KAAK,SAAS,EAAE,GAAG,EAAE,GAAG,SAAQ,IAAK,KAAK,UAAU,KAAK,mBAAmB,EAAE,QAAQ,EAAE,KAAK,mBAAmB,CAAC,CAAC,MAAM,KAAK,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAC,sBAAsB,CAAC,KAAK,gCAAgC,KAAK,+BAA8B,EAAG,KAAK,8BAA8B,KAAK,6BAA4B,CAAE,CAAC,eAAe,CAAC,KAAK,mBAAkB,CAAE,CAAC,mBAAmB,EAAE,CAAC,KAAK,QAAQ,KAAK,WAAW,SAAS,KAAK,MAAM,KAAK,EAAE,KAAK,KAAK,SAAS,KAAK,MAAM,IAAI,GAAG,KAAK,2BAA2B,IAAI,OAAO,KAAK,gBAAgB,CAAC,EAAE,KAAK,WAAW,KAAK,gBAAgB,CAAC,EAAE,SAAS,KAAK,IAAI,EAAE,KAAK,UAAU,SAAS,8BAA8B,IAAI,KAAK,2BAA2B,KAAK,gBAAgB,CAAC,GAAG,QAAQ,KAAK,KAAK,cAAc,GAAG,KAAK,4BAA4B,EAAE,CAAC,EAAE,CAAC,MAAM,EAAE,SAAS,cAAc,sCAAsC,KAAK,QAAQ,WAAW,KAAK,QAAQ,SAAS,yBAAyB,EAAE,KAAK,UAAU,SAAS,8BAA8B,EAAE,EAAE,UAAU,OAAO,sBAAsB,KAAK,QAAQ,UAAU,EAAE,CAAC,CAAC,EAAE,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,CAAC,CAAC,gBAAgB,EAAE,CAAC,OAAO,GAAG,IAAI,EAAE,EAAE,SAAS,KAAK,MAAM,QAAQ,YAAY,CAAC,CAAC,uBAAuB,CAAC,MAAM,EAAE,SAAS,eAAe,UAAU,KAAK,QAAQ,WAAW,KAAK,QAAQ,SAAS,EAAE,EAAE,KAAK,cAAc,CAAA,EAAG,GAAG,EAAE,iBAAiB,IAAI,EAAE,QAAQ,GAAG,CAAC,MAAM,EAAE,SAAS,EAAE,cAAc,kBAAkB,EAAE,WAAW,EAAE,EAAE,EAAE,cAAc,mCAAmC,EAAE,QAAQ,KAAK,KAAK,cAAc,KAAK,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,EAAE,KAAK,cAAc,QAAO,CAAE,CAAC,CAAC"}