{"version":3,"file":"pickup-availability.js","sources":["../theming/js/pickup-availability.js"],"sourcesContent":["customElements.get(\"pickup-availability\")||customElements.define(\"pickup-availability\",class extends HTMLElement{constructor(){super(),this.hasAttribute(\"available\")&&(this.errorHtml=this.querySelector(\"template\").content.firstElementChild.cloneNode(!0),this.onClickRefreshList=this.onClickRefreshList.bind(this),this.fetchAvailability(this.dataset.variantId))}fetchAvailability(e){if(!e)return;let t=this.dataset.rootUrl;t.endsWith(\"/\")||(t=t+\"/\");const s=`${t}variants/${e}/?section_id=pickup-availability`;fetch(s).then(r=>r.text()).then(r=>{const i=new DOMParser().parseFromString(r,\"text/html\").querySelector(\".shopify-section\");this.renderPreview(i)}).catch(r=>{const i=this.querySelector(\"button\");i&&i.removeEventListener(\"click\",this.onClickRefreshList),this.renderError()})}onClickRefreshList(){this.fetchAvailability(this.dataset.variantId)}update(e){e?.available?this.fetchAvailability(e.id):(this.removeAttribute(\"available\"),this.innerHTML=\"\")}renderError(){this.innerHTML=\"\",this.appendChild(this.errorHtml),this.querySelector(\"button\").addEventListener(\"click\",this.onClickRefreshList)}renderPreview(e){const t=document.querySelector(\"pickup-availability-drawer\");if(t&&t.remove(),!e.querySelector(\"pickup-availability-preview\")){this.innerHTML=\"\",this.removeAttribute(\"available\");return}this.innerHTML=e.querySelector(\"pickup-availability-preview\").outerHTML,this.setAttribute(\"available\",\"\"),document.body.appendChild(e.querySelector(\"pickup-availability-drawer\")),this.dataset.productPageColorScheme.split(\" \").forEach(i=>{document.querySelector(\"pickup-availability-drawer\").classList.add(i)});const r=this.querySelector(\"button\");r&&r.addEventListener(\"click\",i=>{document.querySelector(\"pickup-availability-drawer\").show(i.target)})}});customElements.get(\"pickup-availability-drawer\")||customElements.define(\"pickup-availability-drawer\",class extends HTMLElement{constructor(){super(),this.onBodyClick=this.handleBodyClick.bind(this),this.querySelector(\"button\").addEventListener(\"click\",()=>{this.hide()}),this.addEventListener(\"keyup\",e=>{e.code.toUpperCase()===\"ESCAPE\"&&this.hide()})}handleBodyClick(e){const t=e.target;t!=this&&!t.closest(\"pickup-availability-drawer\")&&t.id!=\"ShowPickupAvailabilityDrawer\"&&this.hide()}hide(){this.removeAttribute(\"open\"),document.body.removeEventListener(\"click\",this.onBodyClick),document.body.classList.remove(\"overflow-hidden\"),removeTrapFocus(this.focusElement)}show(e){this.focusElement=e,this.setAttribute(\"open\",\"\"),document.body.addEventListener(\"click\",this.onBodyClick),document.body.classList.add(\"overflow-hidden\"),trapFocus(this)}});\r\n"],"names":["s","r","i"],"mappings":"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"}